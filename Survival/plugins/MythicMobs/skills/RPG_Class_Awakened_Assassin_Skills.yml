######## created by samus2002 #########

# Deadly Calm #

#Every 5 ticks
Deadly_Calm:
  Cooldown: 0
  Conditions:
  - hasAura{aura=Deadly_Calm} false
  Skills:
  - skill{s=Deadly_Calm_ACTIVATE} ?!ismoving
  - auraRemove{aura=Deadly_Calm_ACTIVATOR} @self ?ismoving

Deadly_Calm_ACTIVATE:
  Cooldown: 0
  Skills:
  - Aura{auraName=Deadly_Calm_ACTIVATOR;duration=60} @self
  - delay 10
  - cancelSkill ?!hasaura{n=Deadly_Calm_ACTIVATOR}
  - delay 10
  - cancelSkill ?!hasaura{n=Deadly_Calm_ACTIVATOR}
  - delay 10
  - cancelSkill ?!hasaura{n=Deadly_Calm_ACTIVATOR}
  - delay 10
  - cancelSkill ?!hasaura{n=Deadly_Calm_ACTIVATOR}
  - delay 10
  - cancelSkill ?!hasaura{n=Deadly_Calm_ACTIVATOR}
  - delay 10
  - cancelSkill ?!hasaura{n=Deadly_Calm_ACTIVATOR}
  #activation
  - skill{s=Deadly_Calm_SKILL}
Deadly_Calm_SKILL:
  Cooldown: 5
  Skills:
  #deadly calm aura
  - Aura{auraName=Deadly_Calm;duration=999999} @self
  #deadly calm VFX - activate
  - skill{s=Deadly_Calm_RING} @selflocation{y=0.1}
  #deadly calm VFX - buff (repetitive)
  #deadly calm SFX
  - effect:sound{s=entity.phantom.death;volume=0.9;pitch=1.2} @self

Deadly_Calm_RING:
  Skills:
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=0}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=4.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=1}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=4;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=2}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=3.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=3}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=3;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=4}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=2.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=5}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=2;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=6}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=1.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=7}
  - effect:particlering{p=dust_color_transition;color1=#df9696;color2=#200303;radius=1;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.4;delay=8}

# Lethal Combo #

Lethal_Combo:
  Cooldown: 0.2
  Conditions:
  - crouching false
  #no lastdance aura
  - hasAura{aura=Last_Dance} false
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Lethal_Combo_ST_CAST}
  - skill{s=Shadowquake_APPEAR;damage=4}
Lethal_Combo_ST_CAST:
  Conditions:
  #no shadowquake aura
  - hasAura{aura=Shadowquake} false
  Skills:
  - skill{s=Lethal_Combo_ST_1;damage=3}
  - skill{s=Lethal_Combo_ST_2;damage=3}
  - skill{s=Lethal_Combo_ST_3;damage=3}
  - skill{s=Lethal_Combo_ST_4;damage=4}




Lethal_Combo_ST_1:
  Conditions:
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=1} false
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=2} false
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=3} false
  Skills:
  #slash
  - Aura{auraName=Lethal_Combo_Stack;duration=300;maxStacks=3;delay=1} @self
  - totem{md=2;c=1;oH=Lethal_Combo_DAMAGE_D;hnp=true;hp=true;hR=2;vR=2;i=10} @forward{f=0.6;lockpitch=true}
  #slash VFX
  - summon{type=VFX_SA_SlashCut_1;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.2;y=1.4;sideOffset=0;lockpitch=true}
  #slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=1.1} @self




Lethal_Combo_ST_2:
  Conditions:
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=1} true
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=2} false
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=3} false
  Skills:
  #slash
  - Aura{auraName=Lethal_Combo_Stack;duration=300;maxStacks=3;delay=1} @self
  - totem{md=2;c=1;oH=Lethal_Combo_DAMAGE_D;hnp=true;hp=true;hR=2;vR=2;i=10} @forward{f=0.6;lockpitch=true}
  #slash VFX
  - summon{type=VFX_SA_SlashCut_2;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.2;y=1.4;sideOffset=0;lockpitch=true}
  #slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=1.1} @self

  - delay 4

  #spin slash
  - totem{md=2;c=1;oH=Lethal_Combo_DAMAGE_D2;hnp=true;hp=true;hR=2;vR=2;i=10} @forward{f=0.3;lockpitch=true}
  #spin slash VFX
  - summon{type=VFX_SA_Spin_Slash;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.2;y=1.4;sideOffset=0;lockpitch=true}
  - summon{type=VFX_SA_Spin_Slash;amount=1;radius=0;yRadius=0;onSurface=false;delay=2} @forward{f=0.2;y=0.8;sideOffset=0;lockpitch=true}
  #spin slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_blades_spin;volume=0.7;pitch=1.1} @self




Lethal_Combo_ST_3:
  Conditions:
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=1} false
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=2} true
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=3} false
  Skills:
  - Aura{auraName=Lethal_Combo_Stack;duration=300;maxStacks=3;delay=1} @self
  #short backdash
  - lunge{velocity=0.6;velocityY=-0.05;repeat=2;repeati=10} @forward{f=-5;y=-0.05;lockpitch=true}
  #dash SFX
  - effect:sound{s=entity.ender_dragon.flap;volume=0.6;pitch=1.4} @self

  - delay 4
  
  #dash
  - lunge{velocity=1;velocityY=-0.05;repeat=2;repeati=10} @forward{f=5;y=-0.05;lockpitch=true}
  #dash SFX
  - effect:sound{s=entity.ender_dragon.flap;volume=0.6;pitch=1.4} @self

  - delay 2

  #pierce
  - totem{md=2;c=1;oH=Lethal_Combo_DAMAGE_D;hnp=true;hp=true;hR=2;vR=2;i=10;delay=1} @forward{f=1;lockpitch=true}
  #pierce VFX
  - summon{type=VFX_SA_Pierce;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.8;y=1.4;sideOffset=0;lockpitch=true}
  #pierce SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_pierce;volume=0.7;pitch=1.1} @self
  
  - delay 3

  #up back dash
  - lunge{velocity=0.7;velocityY=0.3;repeat=2;repeati=10} @forward{f=-3;y=2;lockpitch=true}
  #dash SFX
  - effect:sound{s=entity.ender_dragon.flap;volume=0.6;pitch=1.4} @self
  #hover for a bit
  - potion{type=LEVITATION;duration=40;level=-1;hasParticles=false} @self




Lethal_Combo_ST_4:
  Conditions:
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=1} false
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=2} false
  - hasaurastacks{auraName=Lethal_Combo_Stack;stacks=3} true
  Skills:
  - auraremove{aura=Lethal_Combo_Stack} @self
  #throw dagger
  - skill{s=Lethal_Combo_ST_4_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=2.4;y=-1;uel=true;lockpitch=true}
  - effect:sound{s=item.trident.throw;volume=0.8;pitch=1.6} @self
  
  - delay 6
  
  #remove hover
  - potionclear{type=LEVITATION} @self

  - delay 1

  #down forward dash
  - lunge{velocity=1.3;velocityY=-1;repeat=2;repeati=10} @forward{f=4.5;y=-3;lockpitch=true}
  #dash SFX
  - effect:sound{s=entity.ender_dragon.flap;volume=0.6;pitch=1.4} @self
  
  #double down slash VFX
  #- summon{type=VFX_SA_Double_Slashdown;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.2;y=1.4;sideOffset=0;lockpitch=true}
  - orbital{auraName=VFX_SA_Double_Slashdown;bulletType=MOB;mob=VFX_SA_Double_Slashdown;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=10;duration=15;oy=2.4;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0} @self
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_spin;volume=0.7;pitch=1.1} @self

  - delay 5
  
  #double down slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=1.1} @self

  - delay 2

  #double down slash
  - totem{md=2;c=1;oH=Lethal_Combo_DAMAGE_D;hnp=true;hp=true;hR=2;vR=2;i=10} @forward{f=0.3;lockpitch=true}
  #ground smash VFX
  - summon{type=VFX_SA_Rupture_Small;amount=1;radius=0;yRadius=0;onSurface=true} @selflocation{y=0.1}
  - summon{type=VFX_SA_Rubbles_Small;amount=1;radius=0;yRadius=0;onSurface=true} @selflocation{y=0.1}
  - particles{p=Campfire_Cosy_Smoke;amount=7;hS=0.8;vS=0.1;y=0;size=1;speed=0} @forward{f=3;y=0.05;lockpitch=true}
  - particles{p=block_crack;m=DIRT;amount=25;hS=0.9;vS=0.2;y=0;size=1;speed=0} @forward{f=3;y=0.05;lockpitch=true}
  #ground smash SFX
  - effect:sound{s=item.mace.smash_ground_heavy;volume=0.8;pitch=1.2} @self
  
Lethal_Combo_ST_4_PRO:
  Skills:
  - projectile{tickinterpolation=5;bulletType=MOB;mob=VFX_SA_Dagger_Diag;onHit=Lethal_Combo_DAMAGE_D_PRO;v=23;i=10;hR=0.4;vR=0.4;mr=12;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true}
  
Lethal_Combo_DAMAGE_D_PRO:
  Skills:
  - skill{s=Lethal_Combo_DAMAGE} @EntitiesNearOrigin{r=3.5;limit=1;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}

Lethal_Combo_DAMAGE_D2:
  Skills:
  - skill{s=Lethal_Combo_DAMAGE} @EntitiesNearOrigin{r=3.5;limit=4;sort=NEAREST;conditions=[ - isLiving true ]}
Lethal_Combo_DAMAGE_D:
  Skills:
  - skill{s=Lethal_Combo_DAMAGE} @EntitiesNearOrigin{r=3.5;limit=4;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Lethal_Combo_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

# Ravaging Dash #

Ravaging_Dash:
  Conditions:
  - crouching false
  - onground true
  Skills:
  - skill{s=Ravaging_Dash_CAST;damage=3} ?!hasAura{aura=Last_Dance}
  - skill{s=Last_Dance_TELEPORT} ?hasAura{aura=Last_Dance}

Ravaging_Dash_CAST:
  Cooldown: 1
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  #inhale particles VFX
  - skill{s=Ravaging_Dash_RING} @selflocation{y=0.9}
  #inhale SFX
  - effect:sound{s=entity.phantom.ambient;volume=0.8;pitch=0.8} @self
  
  - delay 10

  #projectile forward of multiple slashes
  - projectile{tickinterpolation=5;onHit=Ravaging_Dash_DAMAGE_D;oT=Ravaging_Dash_START;i=2;v=23;hR=1;vR=1;mr=11;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true} @forward{f=5;y=0;lockpitch=true}
  #dash impact VFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_dash;volume=0.7;pitch=1.1} @self
  - summon{type=VFX_SA_Dash_Impact;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=-0.7;y=1.4;sideOffset=0;lockpitch=true}
  #dash trail VFX
  - summon{type=VFX_SA_Dash;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0;y=1.4;sideOffset=0;lockpitch=true}

  - delay 1

  #dash
  - onDamaged{auraName=landresist;d=15;cE=true} @self
  - lunge{velocity=1.8;velocityY=-0.05;repeat=5;repeatinterval=1} @forward{f=12;y=-0.05;lockpitch=true}


Ravaging_Dash_START:
  Cooldown: 0.01
  Skills:
  - summon{type=VFX_SA_Slash_RANDOM;amount=1;radius=0;yRadius=0;onSurface=false} @origin{y=1}
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=1.2} @origin

Ravaging_Dash_DAMAGE_D:
  Skills:
  - skill{s=Ravaging_Dash_DAMAGE} @EntitiesNearOrigin{r=3.5;limit=4;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Ravaging_Dash_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

Ravaging_Dash_RING:
  Skills:
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=0}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=4.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=1}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=4;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=2}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=3.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=3}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=3;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=4}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=2.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=5}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=2;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=6}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=1.5;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=7}
  - effect:particlering{p=dust_color_transition;color1=#ff0000;color2=#130101;radius=1;points=80;amount=1;hS=0;vS=0;y=0.1;speed=0;size=0.55;delay=8}


# Death Bloom #

Death_Bloom:
  Conditions:
  - hasaurastacks{auraName=Death_Bloom_aura} castinstead Death_Bloom_SKILL
  Skills:
  - Aura{auraName=Death_Bloom_aura;interval=1;duration=5} @self

Death_Bloom_SKILL:
  Cooldown: 3
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Death_Bloom_CAST;damage=4}
Death_Bloom_CAST:
  Cooldown: 3
  Skills:
  #CASTING
  - aura{aura=CASTING;duration=40} @self
  #pull
  - particles{p=smoke_normal;amount=50;hS=4;vS=0.15;y=0.1;size=0.75;speed=0.05} @selflocation{y=0}
  - particles{p=smoke_normal;amount=40;hS=3.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=2} @selflocation{y=0}
  - particles{p=smoke_normal;amount=30;hS=3;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=4} @selflocation{y=0}
  - particles{p=smoke_normal;amount=20;hS=2.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=6} @selflocation{y=0}
  - particles{p=smoke_normal;amount=15;hS=2;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=8} @selflocation{y=0}
  - particles{p=smoke_normal;amount=12;hS=1.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=10} @selflocation{y=0}
  - particles{p=smoke_normal;amount=10;hS=1;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=12} @selflocation{y=0}
  - particles{p=smoke_normal;amount=6;hS=0.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=14} @selflocation{y=0}
  - particles{p=smoke_normal;amount=4;hS=0.2;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=16} @selflocation{y=0}
  - skill{s=Death_Bloom_PULL;repeat=9;repeati=2} @EIR{r=5;limit=8;sort=NEAREST;conditions=[ - isLiving true  ]}
  #vanish
  - hide{duration=40} @self
  - potion{type=INVISIBILITY;duration=40;level=1;hasParticles=false} @self
  - onDamaged{auraName=landresist;d=40;cE=true} @self
  #vanish VFX
  - particles{p=smoke_normal;amount=15;hS=0.35;vS=0.6;y=0.9;size=1;speed=0.1} @selflocation{fo=0}
  #vanish SFX
  - effect:sound{s=entity.phantom.ambient;volume=0.7;pitch=0.6} @self
  #stun self
  - stun{d=40;f=true;CancelOnTakeDamage=false;CancelOnDeath=true} @self

  - delay 20
  
  #cut multiple times
  - skill{s=Death_Bloom_DAMAGE;repeat=7;repeati=3} @EIR{r=6;limit=6;sort=RANDOM;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
  #cut VFX
  - summon{type=VFX_SA_Shadow_RANDOM_SUMMONER;amount=1;radius=0;yRadius=0;onSurface=false} @selflocation{y=0.5}
  - summon{type=VFX_SA_Cut_RANDOM;amount=2;radius=3;yRadius=3;onSurface=false;yu=true;repeat=7;repeati=3} @selflocation
  #cut SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_cut;volume=0.6;pitch=1.1;repeat=7;repeati=3} @self

  - delay 20

  #show
  - showentity @self

Death_Bloom_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

Death_Bloom_PULL:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - pull{velocity=2.2;to=true}

# Shadowquake #

Shadowquake:
  Cooldown: 0
  Conditions:
  - crouching castinstead Shadowquake_STACK
  Skills:
  - auraremove{aura=Shadowquake_STACK} @self
Shadowquake_STACK:
  Conditions:
  - hasaurastacks{auraName=Shadowquake_STACK;stacks=2} castinstead Shadowquake_Skill
  Skills:
  - Aura{auraName=Shadowquake_STACK;duration=120;maxStacks=2} @self
Shadowquake_Skill:
  Cooldown: 3
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Shadowquake_CAST;duration=9;damage=4}

Shadowquake_CAST:
  Skills:
  - auraremove{aura=Shadowquake_STACK} @self
  #vanish
  - hide{duration="<skill.duration> * 20"} @self
  - potion{type=INVISIBILITY;duration="<skill.duration> * 20";level=1;hasParticles=false} @self
  - potion{type=SPEED;duration="<skill.duration> * 20";level=3;hasParticles=false} @self
  #vanish VFX
  - particles{p=smoke_normal;amount=15;hS=0.35;vS=0.6;y=0.9;size=1;speed=0.1} @selflocation{fo=0}
  #vanish SFX
  - effect:sound{s=entity.phantom.ambient;volume=0.7;pitch=0.6} @self
  #shadowquake aura
  - aura{aura=Shadowquake;duration=<skill.duration> * 20} @self
  #shadowquake buff vfx


  - delay "<skill.duration> * 20"
  
  #cancel if no aura
  - cancelSkill @self ?!hasAura{aura=Shadowquake}

  #remove shadowquake aura
  - auraRemove{aura=Shadowquake} @self
  #remove potion effects
  - potionclear{types=INVISIBILITY,SPEED} @self



Shadowquake_APPEAR:
  Conditions:
  #has shadowquake aura
  - hasAura{aura=Shadowquake} true
  Skills:
  #remove shadowquake aura
  - auraRemove{aura=Shadowquake} @self
  #remove potion effects
  - potionclear{types=INVISIBILITY,SPEED} @self
  #pulse VFX
  - summon{type=VFX_SA_Pulse;amount=1;radius=0;yRadius=0;onSurface=true} @selflocation
  #groundcrack VFX
  - summon{type=VFX_SA_Rupture;amount=1;radius=0;yRadius=0;onSurface=true} @selflocation
  #rubbles VFX
  - summon{type=VFX_SA_Rubbles;amount=1;radius=0;yRadius=0;onSurface=true} @selflocation
  #quake SFX
  - effect:sound{s=item.mace.smash_ground_heavy;volume=1.1;pitch=0.6} @self
  - effect:sound{s=entity.generic.explode;volume=0.8;pitch=0.6} @self
  - particles{p=smoke_normal;amount=50;hS=4;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=12} @selflocation{y=0}
  - particles{p=smoke_normal;amount=40;hS=3.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=10} @selflocation{y=0}
  - particles{p=smoke_normal;amount=30;hS=3;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=8} @selflocation{y=0}
  - particles{p=smoke_normal;amount=20;hS=2.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=7} @selflocation{y=0}
  - particles{p=smoke_normal;amount=15;hS=2;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=5} @selflocation{y=0}
  - particles{p=smoke_normal;amount=12;hS=1.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=3} @selflocation{y=0}
  - particles{p=smoke_normal;amount=10;hS=1;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=2} @selflocation{y=0}
  - particles{p=smoke_normal;amount=6;hS=0.5;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=1} @selflocation{y=0}
  - particles{p=smoke_normal;amount=4;hS=0.2;vS=0.15;y=0.1;size=0.75;speed=0.05;delay=0} @selflocation{y=0}
  #quake AOE damage
  - skill{s=Shadowquake_DAMAGE} @EIR{r=6;limit=7;sort=RANDOM;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
  
  - delay 1

  #x slash VFX projectile
  - skill{s=Shadowquake_APPEAR_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}}  @forward{f=15;uel=true;lockpitch=true}
  #x slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=0.75} @self
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=1.2;delay=3} @self

Shadowquake_APPEAR_PRO:
  Skills:
  - projectile{tickinterpolation=5;bulletType=MOB;mob=VFX_SA_X_Slash;onHit=Shadowquake_X_DAMAGE_D;v=35;i=10;hR=1;vR=1;mr=30;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true}
  

Shadowquake_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  #stun
  - stun{d=60;f=true;CancelOnTakeDamage=false;CancelOnDeath=true}
  #stun vfx
  - orbital{onTick=Shadowquake_STUN_FX;r=0.5;points=22;i=10;duration=60;oy=2.3;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

Shadowquake_STUN_FX:
  Skills:
  - particles{p=crit;amount=1;hS=0;vS=0;y=0;size=0.4;speed=0} @origin

Shadowquake_X_DAMAGE_D:
  Skills:
  - skill{s=Shadowquake_X_DAMAGE} @EntitiesNearOrigin{r=4.5;limit=4;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Shadowquake_X_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

# Crimson Arc #

Crimson_Arc:
  Cooldown: 3
  Conditions:
  - crouching true
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Crimson_Arc_CAST;damage=2}
Crimson_Arc_CAST:
  Skills:
  #shadow backstep
  - lunge{velocity=0.8;velocityY=0;repeat=6;repeati=10} @forward{f=-5;y=-0.02;lockpitch=true}
  #shadow backstep VFX
  - particles{p=smoke_normal;amount=15;hS=0.35;vS=0.6;y=0.9;size=1;speed=0.01;repeat=5;repeati=3} @self
  #shadow backstep SFX
  - effect:sound{s=block.trial_spawner.ambient_ominous;volume=0.8;pitch=1.3;repeat=1;repeati=3} @self

  - delay 10

  #3 shurikens VFX projectiles
  - skill{s=Crimson_Arc_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
  - skill{s=Crimson_Arc_PRO2;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
  - skill{s=Crimson_Arc_PRO3;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
  #3 shurikens shoot SFX
  - effect:sound{s=block.trial_spawner.spawn_item;volume=0.7;pitch=0.65;repeat=2;repeati=10} @self

Crimson_Arc_PRO:
  Skills:
  - projectile{md=50;DeathDelay=1;onEnd=Crimson_Arc_MISSILE_MISSILE_SUDO;bulletmatchdirection=true;bulletForwardOffset=0;bulletType=MOB;mob=VFX_SA_Shuriken;onHit=Crimson_Arc_SHOOT_DAMAGE_D;drawHitbox=false;v=35;i=10;hR=0.75;vR=0.75;mr=20;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0.2;syo=1.2;tyo=-0.2;bulletYOffset=0}
Crimson_Arc_PRO2:
  Skills:
  - projectile{md=50;DeathDelay=1;onEnd=Crimson_Arc_MISSILE_MISSILE_SUDO;bulletmatchdirection=true;bulletForwardOffset=0;bulletType=MOB;mob=VFX_SA_Shuriken;onHit=Crimson_Arc_SHOOT_DAMAGE_D;drawHitbox=false;v=35;i=10;hR=0.75;vR=0.75;mr=20;hnp=true;hO=10;sE=false;sB=true;hs=false;hfs=0;sfo=0.2;syo=1.2;tyo=-0.2;bulletYOffset=0}
Crimson_Arc_PRO3:
  Skills:
  - projectile{md=50;DeathDelay=1;onEnd=Crimson_Arc_MISSILE_MISSILE_SUDO;bulletmatchdirection=true;bulletForwardOffset=0;bulletType=MOB;mob=VFX_SA_Shuriken;onHit=Crimson_Arc_SHOOT_DAMAGE_D;drawHitbox=false;v=35;i=10;hR=0.75;vR=0.75;mr=20;hnp=true;hO=-10;sE=false;sB=true;hs=false;hfs=0;sfo=0.2;syo=1.2;tyo=-0.2;bulletYOffset=0}

Crimson_Arc_SHOOT_DAMAGE_D:
  Skills:
  - skill{s=Crimson_Arc_SHOOT_DAMAGE} @EntitiesNearOrigin{r=3;limit=4;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Crimson_Arc_SHOOT_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}
  - effect:sound{s=item.mace.smash_air;volume=0.6;pitch=1.3} @self
  

Crimson_Arc_MISSILE_MISSILE_SUDO:
  Skills:
  - missile{fO=true;bulletType=MOB;mob=VFX_SA_Shuriken_BACK;onHit=Crimson_Arc_SHOOT_DAMAGE_D_BACK;drawHitbox=false;md=40;mr=400;v=35;i=10;hR=0.75;vR=0.75;in=2;sE=false;sB=true;hs=false;hfs=0;bulletYOffset=0;syo=0.3;tyo=1.1;stopconditions=[ - isCaster true ]} @self

Crimson_Arc_SHOOT_DAMAGE_D_BACK:
  TargetConditions:
  - isCaster castinstead Crimson_Arc_MISSILE_End_Back_REMOVE
  Skills:
  - skill{s=Crimson_Arc_SHOOT_DAMAGE_BACK} @EntitiesNearOrigin{r=3;limit=4;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Crimson_Arc_SHOOT_DAMAGE_BACK:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}
  - effect:sound{s=item.mace.smash_air;volume=0.6;pitch=1.3} @self
  
Crimson_Arc_MISSILE_End_Back_REMOVE:
  TargetConditions:
  - owner true
  Skills:
  - remove @self



# Last Dance #

Last_Dance:
  Cooldown: 3
  Conditions:
  - crouching true
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Last_Dance_CAST;damage=2}
Last_Dance_CAST:
  Skills:
  #summon blades
  - orbital{auraName=VFX_SA_Blades_Summon;bulletType=MOB;mob=VFX_SA_Blades_Summon;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=10;duration=20;oy=2.4;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0} @self
  #summon blades SFX
  - effect:sound{s=block.trial_spawner.spawn_item;volume=0.7;pitch=1.35;repeat=4;repeati=2} @self
  #lastdance aura
  - aura{aura=CASTING;duration=140} @self
  - aura{aura=Last_Dance;duration=140} @self

  - delay 20

  #spin blades VFX
  - orbital{auraName=VFX_SA_Blades_Summon;bulletType=MOB;mob=VFX_SA_Blades_Spin;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=10;duration=60;oy=2.4;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0} @self
  #spin blades SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_blades_spin;volume=0.7;pitch=1.2;repeat=11;repeati=5} @self
  #throw blades projectiles
  - skill{s=Last_Dance_PRO_CAST;repeat=19;repeati=3}
  
  - delay 60

  #spin slash
  - skill{s=Last_Dance_DAMAGE_SPIN} @EIR{r=5;limit=7;sort=NEAREST;conditions=[ - isLiving true ]}
  #spin slash VFX
  - summon{type=VFX_SA_Spin_Slash2;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.2;y=1.4;sideOffset=0;lockpitch=true}
  - summon{type=VFX_SA_Spin_Slash2;amount=1;radius=0;yRadius=0;onSurface=false} @forward{f=0.2;y=0.7;sideOffset=0;lockpitch=true}
  #spin slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_spin;volume=0.7;pitch=1.1} @self

  - delay 10

  #leap up
  - lunge{velocity=0.01;velocityY=0.7;repeat=1;repeatinterval=1} @forward{f=0;y=5;lockpitch=true}

  - delay 5

  #leap up x 10
  - lunge{velocity=0.01;velocityY=0.04;repeat=39;repeatinterval=1} @forward{f=0;y=5;lockpitch=true}
  #slash x 10
  - totem{md=2;c=1;oH=Last_Dance_DAMAGE_D;hnp=true;hp=true;hR=3;vR=2;i=10;repeat=7;repeati=5} @forward{f=0.3;lockpitch=true}
  #slash VFX
  - summon{type=VFX_SA_Slash_RANDOM;amount=2;radius=2;yRadius=0.5;yradiusuponly=true;onSurface=false;repeat=12;repeati=3} @selflocation{y=1.2}
  #slash SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_slash;volume=0.7;pitch=1.1;repeat=9;repeati=4} @self

  - delay 40

  #cut-through slash
  - skill{s=Last_Dance_DAMAGE_CUT_THROUGH} @EIR{r=5;limit=10;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  - hasaura{aura=cutthrough} true  ]}
  #lunge downward forward
  - onDamaged{auraName=landresist;d=20;cE=true} @self
  - lunge{velocity=2.5;velocityY=-1.2;repeat=2;repeatinterval=1;delay=1} @forward{f=7;y=-3;lockpitch=true}
  #cut-through pierce SFX
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_dash;volume=0.7;pitch=1.1;delay=3} @self
  - effect:sound{s=awakened_assassin_sounds:samus.awakened_assassin.aa_pierce;volume=0.7;pitch=1.1} @self

  #cut x 10 on enemies
  - summon{type=VFX_SA_Cut_RANDOM_SUMMONER;amount=1;radius=0;yRadius=0;onSurface=false} @selflocation{y=1.2}
  - summon{type=VFX_SA_Shadow_RANDOM_SUMMONER;amount=1;radius=0;yRadius=0;onSurface=false} @selflocation{y=0.7}

  - delay 40
  
  #blood burst explode SFX
  - effect:sound{s=entity.breeze.death;volume=1;pitch=0.6} @self
  - effect:sound{s=entity.ender_dragon.hurt;volume=1;pitch=0.8} @self

Last_Dance_PRO_CAST:
  Skills:
  - skill{s=Last_Dance_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @EIR{r=10;limit=2;sort=RANDOM;conditions=[ - isLiving true - hasaura{aura=immunedelay} false }
  
Last_Dance_PRO:
  Skills:
  - projectile{tickinterpolation=5;bulletType=ME;model=vfx_dusk_dagger;onHit=Last_Dance_DAMAGE_D_PRO;bmd=true;v=27;i=10;hR=0.4;vR=0.4;mr=20;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true}

Last_Dance_TELEPORT:
  Cooldown: 0.2
  Conditions:
  #has lastdance aura
  - hasAura{aura=Last_Dance} true
  Skills:
  #teleport (projectile)
  - projectile{onEnd=Last_Dance_TELEPORT_END;v=50;i=10;hR=1;vR=1;mr=15;hnp=false;hO=0;sE=false;sB=true;hs=false;syo=1;tyo=1;sfo=-1} @Forward{f=5}

  - delay 5
  
  #teleport VFX
  - effect:particles{particle=smoke_normal;amount=20;hS=0.5;vS=0.8;y=0.5;speed=0.1;forwardOffset=0;sideOffset=0} @self
  #teleport SFX
  - effect:sound{s=entity.enderman.teleport;volume=1;pitch=0.5} @self
  - effect:sound{s=block.trial_spawner.spawn_item_begin;volume=1;pitch=1.5} @self

Last_Dance_TELEPORT_END: 
  Skills:
  - teleport{spreadh=0;spreadv=0} @origin

Last_Dance_DAMAGE_D:
  Skills:
  - skill{s=Last_Dance_DAMAGE} @EntitiesNearOrigin{r=5;limit=10;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Last_Dance_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - aura{auraName=cutthrough;duration=20}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

Last_Dance_DAMAGE_D_PRO:
  Skills:
  - skill{s=Last_Dance_DAMAGE_PRO} @EntitiesNearOrigin{r=3.5;limit=1;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false  ]}
Last_Dance_DAMAGE_PRO:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  #- aura{auraName=daggerimmune;duration=10}
  - throw{velocity=1.5;velocityY=0}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}

Last_Dance_DAMAGE_SPIN:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - aura{auraName=daggerimmune;duration=10}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}
  - throw{velocity=0;velocityy=8}
  - potion{type=LEVITATION;duration=7;level=-1;hasParticles=false;delay=7} @self
  - throw{velocity=0;velocityy=3;delay=15;repeat=5;repeati=8}

Last_Dance_DAMAGE_CUT_THROUGH:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=5}
  - aura{auraName=daggerimmune;duration=10}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}
  - stun{d=60;f=true;CancelOnTakeDamage=false;CancelOnDeath=false;g=true}
  #blood burst explode VFX
  - summon{type=VFX_SA_BLOODSUMMONER;amount=1;radius=0;yRadius=0;onSurface=false;delay=40} @targetedtarget{conditions=[  - isLiving true ]}
  #bloodburst explode
  - skill{s=Last_Dance_DAMAGE_CUT_THROUGH_AFTERMATH;delay=40} @targetedtarget{conditions=[  - isLiving true ]}

Last_Dance_EXPLODE_TICK:
  Skills:
  - particles{p=dust_color_transition;color1=#FF0000;color2=#330101;amount=1;hS=0;vS=0;y=0;size=0.5;speed=0} @origin
  - modifyProjectile{trait=VELOCITY;action=MULTIPLY;value=0.9}
Last_Dance_EXPLODE_PRO:
  Skills:
  - projectile{oT=Last_Dance_EXPLODE_TICK;v=8;md=30;i=10;hR=1;vR=1;mr=15;hnp=false;hO=<random.0to360>;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.5;tyo=<random.float.-1.5to3>;repeat=6;repeati=0} @forward

Last_Dance_DAMAGE_CUT_THROUGH_AFTERMATH:
  Skills:
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_SA_Impact;v=0;i=10;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=item.mace.smash_air;volume=1;pitch=1.3}
  - damage{a=<skill.damage> * 5;pkb=true;hnp=true;hp=true} ?!hasAura{b=Deadly_Calm}
  - damage{a=<skill.damage> * 10;pkb=true;hnp=true;hp=true;delay=1} ?hasAura{b=Deadly_Calm}
  - auraRemove{aura=Deadly_Calm} @self
#c2e71c936d493effd3763e056c8f1318